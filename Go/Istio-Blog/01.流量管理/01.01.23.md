### VirtualService

影响流量路由的配置。

| 字段         | 类型            | 描述                                                                                                                                                                                                                                                                                                      | 是否必需 |
| ---------- | ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---- |
| `hosts`    | `string[]`    | 向其发送流量的目标主机，可以是带有通配符前缀的 DNS 名称或 IP 地址。`hosts` 字段同时适用于 HTTP 和 TCP 服务。单个 `VirtualService` 可以用于描述相应主机的所有流量属性，包括多个 HTTP 和 TCP 端口的流量属性。网格内的服务（即在服务注册表中找到的服务）必须始终使用其字母数字名称进行引用。仅允许通过 `Gateway` 定义的服务使用 IP 地址                                                                                                  | 是    |
| `gateways` | `string[]`    | 应用这些路由的 `gateways` 和 `sidecars` 的名称。单个 `VirtualService` 可用于网格内的 `sidecars` 以及一个或多个 `gateways`。在特定协议路由的匹配条件中，可以使用 `source` 字段来覆盖该字段施加的选择条件。保留字 `mesh` 用于表示网格中的所有 `sidecars`，省略 `gateways` 字段时，将使用默认网关（`mesh`），这会将规则应用于网格中的所有 `sidecars`。如果提供了网关名称列表，则规则将仅应用于列表中的网关。要将规则应用于网关和边车，请将 `mesh` 指定 为网关名称之一     | 否    |
| `http`     | `HTTPRoute[]` | 用于 HTTP 流量的路由规则的有序列表。HTTP 路由将被应用到名为 `http-`/`http2-`/`grpc-*` 的平台服务端口、协议为 `HTTP`/`HTTP2`/`GRPC`/`TLS-terminated-HTTPS` 的网关端口、以及使用 `HTTP`/`HTTP2`/`GRPC` 协议的服务入口端口。使用与传入请求匹配的第一条规则                                                                                                                       | 否    |
| `tls`      | `TLSRoute[]`  | 用于 未终止的TLS 和 HTTPS 流量的路由规则的有序列表。通常使用 `ClientHello` 消息提供的 SNI 值执行路由。TLS 路由将被应用到名为 `https-`/`tls-` 的平台服务端口、使用 `HTTPS`/`TLS` 协议（即采用“直通” TLS 模式）的未终止的网关端口、以及使用 `HTTPS`/`TLS` 协议的服务入口端口。使用与传入请求匹配的第一条规则。注意：没有关联虚拟服务的 `https-` 或 `tls-` 端口的流量将被视为不透明的 TCP 流量                                                  | 否    |
| `tcp`      | `TLSRoute[]`  | 用于不透明 TCP 流量的路由规则的有序列表。TCP 路由将被应用到任何不是 `HTTP` 或 `TLS` 端口的端口。使用与传入请求匹配的第一条规则                                                                                                                                                                                                                             | 否    |
| `exportTo` | `string[]`    | `VirtualService` 暴露到的命名空间的列表。暴露 `VirtualService` 允许其被其他命名空间中定义的 `sidecars` 和 `gateways` 使用。此功能可以控制 `VirtualService` 跨命名空间边界的可见性。如果未指定命名空间，则默认情况下会将 `VirtualService` 暴露到所有命名空间。`.` 作为保留，表示暴露 `VirtualService` 到声明它的同一命名空间。类似的，`*` 作为保留，表示暴露到所有命名空间。注意：在当前版本中，该 `exportTo` 值限制为 `.` 或 `*`（即当前命名空间或所有命名空间） | 否    |

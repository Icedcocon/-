# apt-cache (搜索软件包和软件包名称)

apt-cache查询高级打包工具（APT）的包缓存，这在Linux系统（例如Debian和Ubuntu）上很常见。 最常见的是，它用于搜索软件包和软件包名称。 这对于帮助您跟踪软件依赖性也很有用。

查看英文版

目录

1 apt-cache 运行系统环境

2 apt-cache 说明

3 apt-cache 语法

4 apt-cache 例子

### apt-cache 运行系统环境

Linux

### apt-cache 说明

**apt-cache**对APT的程序包缓存执行各种操作。**apt-cache**不会操纵系统状态，但会提供操作以从包元数据搜索并生成有趣的输出。

查看英文版

### apt-cache 语法

apt-cache [-agipns] [-o=config_string] [-c=config_file]
          {gencaches | showpkg pkg... | showsrc pkg... |
          stats | dump | dumpavail | unmet | search regex... |
          show pkg [{=pkg_version_number | /target_release}]... |
          depends pkg [{=pkg_version_number | /target_release}]... |
          rdepends pkg [{=pkg_version_number | /target_release}]... |
          pkgnames [prefix] | dotty pkg [{=pkg_version_number |
          /target_release}]... | xvcg pkg [{=pkg_version_number |
          /target_release}]... | policy [pkg...] | madison pkg... |
          {-v | --version} | {-h | --help}}

## 指令

| **gencaches**         | 创建或重新创建APT的程序包缓存。如果缺少此缓存或该缓存已过期，则需要该缓存的所有命令都会隐式完成此操作。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **showpkg** pkg...    | 显示有关命令行中列出的软件包的信息。其余参数是程序包名称。显示列出的每个程序包的可用版本和反向依赖关系，以及每个版本的正向依赖关系。前向（正常）依赖关系是相关程序包所依赖的程序包；反向依赖性是指那些依赖于所讨论的软件包的软件包。因此，必须满足程序包的前向依存关系，而不必满足反向依存关系。例如，**apt-cache showpkg libreadline2**将产生类似于以下内容的输出：<br><br>Package: libreadline2Versions: 2.1-12(/var/state/apt/lists/foo_Packages),Reverse Depends:libreadlineg2,libreadline2libreadline2-altdev,libreadline2Dependencies:2.1-12 - libc5 (2 5.4.0-0) ncurses3.0 (0 (null))Provides:2.1-12 -Reverse Provides:<br><br>因此可以看出，libreadline2版本2.1-12取决于libc5和ncurses3.0，必须安装它们才能使libreadline2正常工作。反过来，libreadlineg2和libreadline2-altdev依赖于libreadline2。如果已安装libreadline2，则还必须安装libc5和ncurses3.0（和ldso）；否则，必须先安装libread5。无需安装libreadlineg2和libreadline2-altdev。对于输出的其余部分的特定含义，最好参考apt源代码。                                                              |
| **stats**             | 显示有关缓存的一些统计信息。预计不会有其他争论。报告的统计数据是：<br><br>-  软件包名称总数是在缓存中找到的软件包名称的数量。<br>-  普通软件包是常规，普通软件包名称的数量；这些程序包的名称与依赖关系中其他程序包使用的名称之间是一一对应的。大多数软件包都属于此类。<br>-  纯虚拟软件包是仅作为虚拟软件包名称存在的软件包的数量；也就是说，软件包仅“提供”虚拟软件包名称，而没有软件包实际使用该名称。例如，在Debian系统中，“ mail-transport-agent”是一个纯虚拟包。有几个软件包提供“ mail-transport-agent”，但是没有名为“ mail-transport-agent”的软件包。<br>-  单个虚拟软件包是软件包的数量，其中只有一个软件包提供了特定的虚拟软件包。例如，在Debian系统中，“ X11-text-viewer”是一个虚拟软件包，但是只有一个软件包xless提供了“ X11-text-viewer”。<br>-  混合虚拟软件包是提供特定虚拟软件包或以虚拟软件包名称作为软件包名称的软件包数量。例如，在Debian系统中，“ debconf”既是实际的软件包，也由debconf-tiny软件包提供。<br>-  缺少依赖项中引用但没有任何软件包提供的软件包名称的数量。如果没有访问完整的发行版，或者已从发行版中删除了某个软件包（真实或虚拟），则可能缺少软件包。通常，它们是从“冲突或中断”语句中引用的。<br>-  完全不同的版本总数是在缓存中找到的软件包版本的数量；因此，该值至少等于软件包名称总数。如果要访问多个分发（例如，“稳定”和“不稳定”），则此值可能会比软件包名称总数大得多。<br>-  总依赖关系是高速缓存中所有程序包声明的依赖关系的数量。 |
| **showsrc** pkg...    | 显示与给定包名称匹配的所有源包记录。显示所有版本，以及所有声明该名称为二进制包的记录。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **dump**              | 显示缓存中每个软件包的简短列表。它主要用于调试。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **dumpavail**         | dumpavail将可用列表打印到标准输出。这适合与dpkg一起使用，并由dselect方法使用。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **unmet**             | 显示软件包缓存中所有未满足的依赖项的摘要。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **show** pkg...       | show执行类似于**dpkg --print-avail**的功能；它显示命名软件包的软件包记录。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **search** regex...   | 在给定的POSIX样式正则表达式模式的所有可用软件包列表上执行全文搜索。它在软件包名称和描述中搜索正则表达式的出现，并打印出软件包名称和简短描述，包括虚拟软件包名称。如果给出**--full**，则为每个匹配的软件包产生与show相同的输出；如果给出--names-only，则不搜索长描述，仅软件包名称。可以使用单独的参数来指定将AND在一起的多个搜索模式。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **depends** pkg...    | 显示了软件包具有的每个依赖关系的列表，以及可以满足该依赖关系的所有其他可能的软件包。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **rdepends** pkg...   | 显示了软件包具有的每个反向依赖性的列表。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **pkgnames** [prefix] | 此命令显示APT知道的每个软件包的名称。可选参数是前缀匹配，用于过滤名称列表。该输出适合在Shell Tab完整功能中使用，并且生成速度非常快。此命令最好与--generate选项一起使用。注意，APT知道的软件包不一定可以下载，安装或安装（例如，虚拟软件包也列在生成的列表中）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **dotty** pkg...      | 在命令行中获取软件包列表，并从GraphViz软件包中生成适合dotty使用的输出。结果将是代表程序包之间关系的一组节点和边。默认情况下，给定的软件包将跟踪所有相关的软件包；这会产生非常大的图形。要将输出限制为仅在命令行中列出的软件包，请设置APT :: Cache :: GivenOnly选项。生成的节点将具有多种形状。普通包装是盒子，纯虚拟包装是三角形，混合虚拟包装是菱形，缺失包装是六角形。橙色框表示递归已停止（叶包装），蓝线表示依赖，绿线表示冲突。**dotty**无法显示较大的软件包集。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **xvcg** pkg...       | 一样疯疯癫癫，只为xvcg从VCG工具。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **policy** [pkg...]   | ****该策略旨在帮助调试与首选项文件有关的问题。没有任何参数，它将打印出每个源的优先级。否则，它将打印出有关命名包优先级选择的详细信息。****                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **madison** pkg...    | 尝试模仿Debian档案管理工具madison的输出格式和功能的子集。它以表格格式显示软件包的可用版本。与原始的madison不同，它只能显示有关APT已为其检索程序包列表**（APT :: Architecture）**的体系结构的信息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |

## 选件

可以使用配置文件来设置所有命令行选项，描述指示要设置的配置选项。对于布尔选项，你可以通过使用类似覆盖配置文件**-F-，--no-F ，-f =**没有或其他变化。

| **-p**, **--pkg-cache**                                                                                                                                                        | 选择文件以存储程序包缓存。程序包缓存是所有操作使用的主要缓存。配置项**：Dir :: Cache :: pkgcache。**                                                                                   |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| **-s**, **--src-cache**                                                                                                                                                        | 选择要存储源缓存的文件。该源仅由gencaches使用，它存储来自远程源的包信息的已解析版本。构建程序包高速缓存时，源高速缓存用于避免重新解析所有程序包文件。配置项：**Dir :: Cache :: srcpkgcache。**                                |
| **-q**, **--quiet**                                                                                                                                                            | 安静; 产生适合记录的输出，省略进度指示器。更多的q将产生更大的静默度，最大为2。您也可以使用**-q = ＃**设置静默度级别，从而覆盖配置文件。配置项：安静。                                                                  |
| **-i**, **--important**                                                                                                                                                        | 仅打印重要的依赖项；与unmet和依赖一起使用。原因只有Depends中和预依赖要打印的关系。配置项**：APT :: Cache :: Important。**                                                                  |
| **--no-pre-depends**,<br>**--no-depends**,<br>**--no-recommends**,<br>**--no-suggests**,<br>**--no-conflicts**,<br>**--no-breaks**,<br>**--no-replaces**,<br>**--no-enhances** | 默认情况下，depends和rdepends打印所有依赖项。可以使用这些标志进行调整，这些标志将忽略指定的依赖项类型。配置项：**APT :: Cache :: ShowDependencyType（例如，APT :: Cache :: ShowRecommends）。**          |
| **-f**, **--full**                                                                                                                                                             | 搜索时打印完整的包裹记录。配置项：**APT :: Cache :: ShowFull。**                                                                                                     |
| **-a**, **--all-versions**                                                                                                                                                     | 打印所有可用版本的完整记录。这是默认值。要关闭它，请使用--**no-all-versions。**如果指定**--no-all-versions**，则仅显示候选版本（将选择要安装的版本）。此选项仅适用于show命令。配置项**：APT :: Cache :: AllVersions。** |
| **-g**, **--generate**                                                                                                                                                         | 执行程序包高速缓存的自动更新，而不是照原样使用高速缓存。这是默认值。要关闭它，请使用--no-generate。配置项：**APT :: Cache :: Generate。**                                                          |
| **--names-only**, **-n**                                                                                                                                                       | 仅搜索软件包名称，而不搜索详细说明。配置项：**APT :: Cache :: NamesOnly**.                                                                                               |
| **--all-names**                                                                                                                                                                | 使**pkgnames**打印所有名称，包括虚拟软件包和缺少的依赖项。配置项：**APT :: Cache :: AllNames。**                                                                               |
| **--recurse**                                                                                                                                                                  | 进行makedepend和rdepends递归，以便所有提及的软件包都打印一次。配置项：**APT :: Cache :: RecurseDepends。**                                                                    |
| **--installed**                                                                                                                                                                | 将depends和rdepends的输出限制为当前安装的软件包。配置项：APT :: Cache :: Installed。                                                                                     |
| **-h**, **--help**                                                                                                                                                             | 显示简短的使用摘要。                                                                                                                                         |
| **-v**, **--version**                                                                                                                                                          | 显示程序版本。                                                                                                                                            |
| **-c**, **--config-file**                                                                                                                                                      | 配置文件；指定要使用的配置文件。该程序将读取默认配置文件，然后读取此配置文件。如果需要在解析默认配置文件之前设置配置设置，请使用**APT_CONFIG**环境变量指定一个文件。有关语法信息，请参见apt.conf。                                       |
| **-o**, **--option**                                                                                                                                                           | 设置配置选项；这将设置一个任意配置选项。语法为**-o Foo :: Bar = bar。-o和--option**可以多次使用以设置不同的选项。                                                                          |

## 档案

| /etc/apt/sources.list       | 获取软件包的位置。配置项**：Dir :: Etc :: SourceList。**                   |
| --------------------------- | ------------------------------------------------------------ |
| /etc/apt/sources.list.d/    | 用于获取软件包位置的文件片段。配置项：**Dir :: Etc :: SourceParts。**            |
| /var/lib/apt/lists/         | sources.list中指定的每个包资源的状态信息存储区。配置项：**Dir :: State :: Lists。** |
| /var/lib/apt/lists/partial/ | 状态信息的存储区域。配置项**：Dir :: State :: Lists**                      |

查看英文版

### apt-cache 例子

apt-cache search opengl

在APT存储库中搜索名称或描述中带有文本**opengl**的软件包。
